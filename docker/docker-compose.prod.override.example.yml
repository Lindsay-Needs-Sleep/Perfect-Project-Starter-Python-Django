# automatically merged and used with 'docker compose up'

services:

    postgres:
        command: bash -c "python manage.py migrate && python manage.py runserver 0.0.0.0:8000"
        environment:
            - POSTGRES_DB=<fill>
            - POSTGRES_USER=<fill>
            - POSTGRES_PASSWORD=<fill>

    front-components:
        command: bash -c "npm install && npm run build"

volumes:
    back-src-volume:
        driver: local
        driver_opts:
            type: none
            o: bind
            device: ../back_src
    front-components-src-volume:
        driver: local
        driver_opts:
            type: none
            o: bind
            device: ../front_components
    node-program-src-volume:
        driver: local
        driver_opts:
            type: none
            o: bind
            device: ../node_src
    public-src-volume:
        driver: local
        driver_opts:
            type: none
            o: bind
            device: ../public
    shared-volume:
        driver: local
        driver_opts:
            type: none
            o: bind
            device: ../shared_volume
